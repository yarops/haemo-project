import{a as l}from"./js.cookie.js";document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll("img.lazy-image"));if("IntersectionObserver"in window){let o=new IntersectionObserver(function(t,a){t.forEach(function(i){if(i.isIntersecting){let n=i.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy-image"),o.unobserve(n))}})});e.forEach(function(t){o.observe(t)})}});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".js-modal"),o=document.querySelectorAll(".js-modal-toggler");if(!e||!o){console.log("Shares elements not found");return}o.forEach(a=>{console.log("modalPopupToggler",a),a.addEventListener("click",function(i){i.preventDefault();const s=i.target.dataset.modal;if(console.log(s),!s)return;const r=document.getElementById(s);r&&(r.classList.contains("active")?r.classList.remove("active"):r.classList.add("active"))})}),document.querySelectorAll(".js-modal-close").forEach(a=>{a.addEventListener("click",function(i){i.preventDefault(),document.querySelectorAll(".js-modal").forEach(s=>s.classList.remove("active"))})})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".js-navbar-panel");if(console.log(e),e===null)return;const o=document.querySelector(".js-navbar-panel-toggler");o!==null&&o.addEventListener("click",function(a){a.preventDefault(),e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")});const t=document.querySelector(".js-navbar-panel-closer");t!==null&&t.addEventListener("click",function(a){a.preventDefault(),e.classList.remove("active")})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".privacy"),o=document.querySelector(".js-policy-agree");var t=l.get("_policy");t===void 0&&e.classList.remove("hidden"),o.addEventListener("click",function(a){a.preventDefault(),e.classList.add("hidden"),l.set("_policy",1,{expires:368,path:"/"})})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".search-form");document.querySelector(".search-form__button").addEventListener("click",function(t){t.preventDefault(),e.submit()})});const c={bluesky:e=>`https://bsky.app/intent/compose?text=${e.text||e.title}%0A%0A${e.url}`,facebook:e=>`https://www.facebook.com/sharer/sharer.php?u=${e.url}${e.hashtags?`&hashtag=%23${e.hashtags.split("%2C")[0]}`:""}`,fediverse:e=>`https://${e.s2fInstance}/?text=${e.title}%0D%0A${e.url}${e.text?`%0D%0A%0D%0A${e.text}`:""}${e.via?`%0D%0A%0D%0A${e.via}`:""}`,email:e=>`mailto:?subject=${e.title}&body=${e.url}`,hackernews:e=>`https://news.ycombinator.com/submitlink?u=${e.url}&t=${e.title}`,linkedin:e=>`https://www.linkedin.com/sharing/share-offsite/?url=${e.url}`,mastodon:e=>`https://toot.kytta.dev/?text=${e.title}%0D%0A${e.url}${e.text?`%0D%0A%0D%0A${e.text}`:""}${e.via?`%0D%0A%0D%0A${e.via}`:""}`,messenger:e=>`https://www.facebook.com/dialog/send?app_id=${e.fbAppId}&link=${e.url}&redirect_uri=${e.url}`,odnoklassniki:e=>`https://connect.ok.ru/offer?url=${e.url}&title=${e.title}${e.media?`&imageUrl=${e.media}`:""}`,pinterest:e=>`https://pinterest.com/pin/create/button/?url=${e.url}&description=${e.title}${e.media?`&media=${e.media}`:""}`,pocket:e=>`https://getpocket.com/edit.php?url=${e.url}`,reddit:e=>`https://www.reddit.com/submit?title=${e.title}&url=${e.url}`,teams:e=>`https://teams.microsoft.com/share?href=${e.url}${e.text?`&msgText=${e.text}`:""}`,telegram:e=>`https://telegram.me/share/url?url=${e.url}${e.text?`&text=${e.text}`:""}`,tumblr:e=>`https://www.tumblr.com/widgets/share/tool?posttype=link${e.hashtags?`&tags=${e.hashtags}`:""}&title=${e.title}&content=${e.url}&canonicalUrl=${e.url}${e.text?`&caption=${e.text}`:""}${e.via?`&show-via=${e.via}`:""}`,twitter:e=>`https://twitter.com/intent/tweet?url=${e.url}&text=${e.title}${e.via?`&via=${e.via}`:""}${e.hashtags?`&hashtags=${e.hashtags}`:""}`,viber:e=>`viber://forward?text=${e.title}%0D%0A${e.url}${e.text?`%0D%0A%0D%0A${e.text}`:""}`,vkontakte:e=>`https://vk.com/share.php?url=${e.url}&title=${e.title}${e.media?`&image=${e.media}`:""}`,whatsapp:e=>`https://wa.me/?text=${e.title}%0D%0A${e.url}${e.text?`%0D%0A%0D%0A${e.text}`:""}`},m=e=>()=>{window.open(e,"_blank","noopener,noreferrer")},u=()=>{const e=document.querySelectorAll(".shareon");for(const o of e)for(const t of o.children)if(t){const a=t.classList.length;for(let i=0;i<a;i+=1){const n=t.classList.item(i);if(n==="copy-url"&&t.addEventListener("click",()=>{const s=t.dataset.url||o.dataset.url||window.location.href;navigator.clipboard.writeText(s),t.classList.add("done"),setTimeout(()=>{t.classList.remove("done")},1e3)}),n==="print"&&t.addEventListener("click",()=>{window.print()}),n==="web-share"){const s={title:t.dataset.title||o.dataset.title||document.title,text:t.dataset.text||o.dataset.text||"",url:t.dataset.url||o.dataset.url||window.location.href};navigator.canShare&&navigator.canShare(s)?t.addEventListener("click",()=>{navigator.share(s)}):t.style.display="none"}if(Object.prototype.hasOwnProperty.call(c,n)){const s={url:encodeURIComponent(t.dataset.url||o.dataset.url||window.location.href),title:encodeURIComponent(t.dataset.title||o.dataset.title||document.title),media:encodeURIComponent(t.dataset.media||o.dataset.media||""),text:encodeURIComponent(t.dataset.text||o.dataset.text||""),via:encodeURIComponent(t.dataset.via||o.dataset.via||""),hashtags:encodeURIComponent(t.dataset.hashtags||o.dataset.hashtags||""),fbAppId:encodeURIComponent(t.dataset.fbAppId||o.dataset.fbAppId||""),s2fInstance:encodeURIComponent(t.dataset.s2fInstance||o.dataset.s2fInstance||"s2f.kytta.dev")},r=c[n](s);t.tagName.toLowerCase()==="a"?(t.setAttribute("href",r),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank")):t.addEventListener("click",m(r));break}}}},d=document.currentScript;d&&d.hasAttribute("init")&&u();document.addEventListener("DOMContentLoaded",function(){u()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#back-to-top");if(e===null)return;const o=()=>{window.scrollY>400?e.style.visibility="visible":e.style.visibility="hidden"};document.addEventListener("scroll",()=>{o()}),e.addEventListener("click",t=>{t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})});
